import{e as De,v as we,r as ze,B as Be,k as Ve,C as Ee,F as Te,G as Se,_ as Ae}from"./index.4ad22c22.js";/* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               */import{d as Me,j as _,r as $e,c as j,w as qe,b1 as Ne,C as u,D as F,aI as a,aH as t,aM as i,G as d,aK as R,aJ as G,aE as r,E as Le,aN as k,u as Ue,bK as Pe,aF as f,aX as w,n as Oe,b7 as je,b8 as Re,bd as Ge,b2 as He,a6 as Ke,aY as Xe,bc as Ye,bT as Je,bz as We,bA as Qe,bB as Ze,ba as et,bD as tt,bU as at,bn as nt,bo as ot,ag as lt,ae as st,af as ut,bW as it,bX as ct,bY as rt,be as dt,bf as mt}from"./arco.b6dedf2e.js";import{u as pt}from"./loading.f776d3e0.js";import{e as _t,f as vt,g as ft}from"./auth.8de74d75.js";import{c as z}from"./cloneDeep.7f42bec5.js";import{S as ht}from"./sortable.esm.9c6bb8d9.js";import"./chart.94e2d85e.js";import"./vue.02736e06.js";const M=I=>(dt("data-v-a3ef26ef"),I=I(),mt(),I),gt={class:"container"},bt={class:"action-icon"},yt={class:"action-icon"},Ct={id:"tableSetting"},Ft={style:{"margin-right":"4px",cursor:"move"}},kt={class:"title"},It={key:0},xt=M(()=>d("img",{alt:"avatar",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/581b17753093199839f2e327e726b157.svg~tplv-49unhts6dw-image.image"},null,-1)),Dt=M(()=>d("img",{alt:"avatar",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/77721e365eb2ab786c889682cbc721c1.svg~tplv-49unhts6dw-image.image"},null,-1)),wt=M(()=>d("img",{alt:"avatar",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/ea8b09190046da0ea7e070d83c5d1731.svg~tplv-49unhts6dw-image.image"},null,-1)),zt={name:"MenuList"},Bt=Me({...zt,setup(I){const $=De(),h=(n,o)=>{let l={requiresAuth:!1};return n===1&&(l={requiresAuth:!0,icon:""}),n===2&&(l={requiresAuth:!0,hideChildrenInMenu:!0,icon:""}),n===3&&(l={hideInMenu:!0,requiresAuth:!0,icon:""}),{title:"",name:"",parent_id:o,path:"",type:n||1,meta:l}},B=_(),m=_(!1),{loading:H,setLoading:q}=pt(!0),{t:g}=we.exports.useI18n(),b=_(1),N=_([]),s=_(h()),v=_([]),x=_([]),V=_("medium"),L=$e({...{current:1,pageSize:20}}),K=j(()=>[{name:g("searchTable.size.mini"),value:"mini"},{name:g("searchTable.size.small"),value:"small"},{name:g("searchTable.size.medium"),value:"medium"},{name:g("searchTable.size.large"),value:"large"}]),X=n=>{b.value=2,s.value=z(n),m.value=!0},Y=j(()=>[{title:g("searchTable.columns.index"),dataIndex:"id"},{title:"\u83DC\u5355\u6807\u9898",dataIndex:"title",slotName:"title"},{title:"\u7C7B\u578B",dataIndex:"type",slotName:"type"},{title:"path",dataIndex:"path"},{title:"\u7EC4\u4EF6",dataIndex:"name"},{title:"\u521B\u5EFA\u65F6\u95F4",width:170,dataIndex:"created_time"},{title:g("searchTable.columns.operations"),dataIndex:"operations",fixed:"right",width:240,slotName:"operations"}]),J=n=>{s.value=h(2,n.id),b.value=1,m.value=!0},W=n=>{s.value=h(3,n.id),b.value=1,m.value=!0},Q=n=>{s.value=h(1,n.id),b.value=1,m.value=!0},Z=()=>{B.value.validate(async n=>{n||await _t(s.value).then(o=>{(o==null?void 0:o.code)===2e4?(m.value=!1,s.value=h(),w.success(b.value===1?"\u6DFB\u52A0\u6210\u529F":"\u4FDD\u5B58\u6210\u529F"),$.fetchServerMenuConfig(),D()):w.error(o.message)})})},ee=()=>{m.value=!0,s.value=h(1,null)},te=async n=>{vt(n).then(o=>{o.code===2e4?(w.success("\u5220\u9664\u6210\u529F"),$.fetchServerMenuConfig(),D()):w.error(o.message)})},D=async()=>{q(!0);try{const{data:n}=await ft();N.value=n.list}catch{}finally{q(!1)}},ae=()=>{D()};D();const ne=(n,o)=>{V.value=n},oe=(n,o,l)=>{n?v.value.splice(l,0,o):v.value=x.value.filter(c=>c.dataIndex!==o.dataIndex)},U=(n,o,l,c=!1)=>{const p=c?z(n):n;return o>-1&&l>-1&&p.splice(o,1,p.splice(l,1,p[o]).pop()),p},le=n=>{n&&Oe(()=>{const o=document.getElementById("tableSetting");new ht(o,{onEnd(l){const{oldIndex:c,newIndex:p}=l;U(v.value,c,p),U(x.value,c,p)}})})};return qe(()=>Y.value,n=>{v.value=z(n),v.value.forEach((o,l)=>{o.checked=!0}),x.value=z(v.value)},{deep:!0,immediate:!0}),(n,o)=>{const l=je,c=Re,p=Ge,se=He,ue=Ne("Breadcrumb"),ie=Ke,y=Xe,P=Ye,O=Je,ce=ze,E=We,re=Be,de=Qe,me=Ze,pe=Ve,_e=Ee,ve=et,fe=tt,he=at,T=nt,S=ot,ge=lt,be=Te,ye=st,Ce=ut,Fe=it,ke=Se,Ie=ct,xe=rt;return u(),F("div",gt,[a(se,{ref_key:"createForm",ref:B,visible:m.value,title:b.value===1?"\u6DFB\u52A0":"\u7F16\u8F91",onOk:Z,onCancel:o[4]||(o[4]=e=>m.value=!1),onClose:o[5]||(o[5]=e=>m.value=!1)},{default:t(()=>[a(p,{ref_key:"createForm",ref:B,model:s.value},{default:t(()=>[a(c,{label:"\u6807\u9898",field:"title",rules:[{required:!0,message:"\u6807\u9898"}]},{default:t(()=>[a(l,{modelValue:s.value.title,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value.title=e)},null,8,["modelValue"])]),_:1}),a(c,{label:"\u7EC4\u4EF6\u540D\u79F0",field:"name",rules:[{required:!0,message:"\u7EC4\u4EF6\u540D\u79F0"}]},{default:t(()=>[a(l,{modelValue:s.value.name,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value.name=e)},null,8,["modelValue"])]),_:1}),a(c,{label:"icon",field:"icon"},{default:t(()=>[a(l,{modelValue:s.value.meta.icon,"onUpdate:modelValue":o[2]||(o[2]=e=>s.value.meta.icon=e)},null,8,["modelValue"])]),_:1}),a(c,{label:"path",field:"path",rules:[{required:!0,message:"path"}]},{default:t(()=>[a(l,{modelValue:s.value.path,"onUpdate:modelValue":o[3]||(o[3]=e=>s.value.path=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"]),a(ue,{items:["\u6743\u9650\u7BA1\u7406","\u83DC\u5355\u5217\u8868"]}),a(xe,{class:"general-card",title:"\u83DC\u5355\u5217\u8868"},{default:t(()=>[a(he,{style:{"margin-bottom":"16px"}},{default:t(()=>[a(O,{span:12},{default:t(()=>[a(P,null,{default:t(()=>[a(y,{type:"primary",onClick:ee},{icon:t(()=>[a(ie)]),default:t(()=>[i(" \u6DFB\u52A0\u6839\u76EE\u5F55 ")]),_:1})]),_:1})]),_:1}),a(O,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:t(()=>[a(E,{content:n.$t("searchTable.actions.refresh")},{default:t(()=>[d("div",{class:"action-icon",onClick:ae},[a(ce,{size:"18"})])]),_:1},8,["content"]),a(me,{onSelect:ne},{content:t(()=>[(u(!0),F(R,null,G(K.value,e=>(u(),r(de,{key:e.value,value:e.value,class:Le({active:e.value===V.value})},{default:t(()=>[d("span",null,k(e.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[a(E,{content:n.$t("searchTable.actions.density")},{default:t(()=>[d("div",bt,[a(re,{size:"18"})])]),_:1},8,["content"])]),_:1}),a(E,{content:n.$t("searchTable.actions.columnSetting")},{default:t(()=>[a(fe,{trigger:"click",position:"bl",onPopupVisibleChange:le},{content:t(()=>[d("div",Ct,[(u(!0),F(R,null,G(x.value,(e,C)=>(u(),F("div",{key:e.dataIndex,class:"setting"},[d("div",Ft,[a(_e)]),d("div",null,[a(ve,{modelValue:e.checked,"onUpdate:modelValue":A=>e.checked=A,onChange:A=>oe(A,e,C)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),d("div",kt,k(e.title==="#"?"\u5E8F\u5217\u53F7":e.title),1)]))),128))])]),default:t(()=>[d("div",yt,[a(pe,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),a(Ie,{"row-key":"id",loading:Ue(H),pagination:!1,columns:v.value,data:N.value,bordered:!1,size:V.value},{index:t(({rowIndex:e})=>[i(k(e+1+(L.current-1)*L.pageSize),1)]),title:t(({record:e})=>[e.meta.icon?(u(),F("span",It,[(u(),r(Pe(e.meta.icon)))])):f("",!0),i(" "+k(e.title),1)]),type:t(({record:e})=>[e.type===1?(u(),r(T,{key:0,color:"cyan"},{default:t(()=>[i("\u76EE\u5F55")]),_:1})):f("",!0),e.type===2?(u(),r(T,{key:1,color:"arcoblue"},{default:t(()=>[i("\u83DC\u5355")]),_:1})):f("",!0),e.type===3?(u(),r(T,{key:2,color:"red"},{default:t(()=>[i("\u64CD\u4F5C")]),_:1})):f("",!0)]),contentType:t(({record:e})=>[a(P,null,{default:t(()=>[e.contentType==="img"?(u(),r(S,{key:0,size:16,shape:"square"},{default:t(()=>[xt]),_:1})):e.contentType==="horizontalVideo"?(u(),r(S,{key:1,size:16,shape:"square"},{default:t(()=>[Dt]),_:1})):(u(),r(S,{key:2,size:16,shape:"square"},{default:t(()=>[wt]),_:1})),i(" "+k(n.$t(`searchTable.form.contentType.${e.contentType}`)),1)]),_:2},1024)]),operations:t(({record:e})=>[a(y,{type:"text",size:"small",onClick:C=>X(e)},{icon:t(()=>[a(ge)]),default:t(()=>[i(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e.type===1?(u(),r(y,{key:0,type:"text",size:"small",onClick:C=>J(e)},{icon:t(()=>[a(be)]),default:t(()=>[i(" \u6DFB\u52A0\u5B50\u83DC\u5355 ")]),_:2},1032,["onClick"])):f("",!0),e.type===2?(u(),r(y,{key:1,type:"text",size:"small",onClick:C=>W(e)},{icon:t(()=>[a(ye)]),default:t(()=>[i(" \u6DFB\u52A0\u64CD\u4F5C ")]),_:2},1032,["onClick"])):f("",!0),a(Fe,{content:"\u786E\u5B9A\u5220\u9664 [ "+e.title+" ]?",onOk:C=>te(e.id)},{default:t(()=>[a(y,{type:"text",size:"small"},{icon:t(()=>[a(Ce)]),default:t(()=>[i(" \u5220\u9664 ")]),_:1})]),_:2},1032,["content","onOk"]),e.type===1?(u(),r(y,{key:2,type:"text",size:"small",onClick:C=>Q(e)},{icon:t(()=>[a(ke)]),default:t(()=>[i(" \u6DFB\u52A0\u76EE\u5F55 ")]),_:2},1032,["onClick"])):f("",!0)]),_:1},8,["loading","columns","data","size"])]),_:1})])}}});const ta=Ae(Bt,[["__scopeId","data-v-a3ef26ef"]]);export{ta as default};
